---
title: RUST-闭包
date: 2024/04/22
tags:
 - rust
categories:
 - rust
 - cpp
---

# 闭包

## 3种 特征fn特征
1. FnOnce
>FnOnce是一个特殊的trait，它表示该闭包或函数只能被调用一次。这是因为在闭包中捕获了环境中的变量时，这些变量的所有权可能会被移动到闭包中。当闭包被调用时，它会"消费"这些变量的所有权。因此，一旦被调用过，就不能再次调用同一个闭包实例。
如果闭包或函数实现了Copytrait，那么它们在被调用时就会被隐式复制，这样就可以多次调用同一个实例。
>
> 补充
> - 对于像i32、f64这样的基本数据类型,它们自动实现了Copy trait,因为复制这些类型是一个很廉价的操作,不会带来所有权转移或资源释放的问题。
> - 对于自定义的结构体或枚举,如果它们的所有字段都实现了Copy trait,那么它们就会自动获得Copy trait实现。但如果其中任何一个字段没有实现Copy,那么整个类型就无法实现Copy。
> - 对于闭包,如果闭包没有捕获任何环境变量,那么它会自动获得Copy trait实现。但如果捕获了环境变量,就取决于这些变量的类型是否实现了Copy。如果实现了,那么闭包可以实现Copy,否则闭包就无法实现Copy。

2. FnMut

